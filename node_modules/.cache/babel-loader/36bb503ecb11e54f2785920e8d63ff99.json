{"ast":null,"code":"import _classCallCheck from \"/Users/ksin/grids/Bloc-Chat-React-extra-features/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ksin/grids/Bloc-Chat-React-extra-features/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ksin/grids/Bloc-Chat-React-extra-features/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ksin/grids/Bloc-Chat-React-extra-features/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ksin/grids/Bloc-Chat-React-extra-features/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/ksin/grids/Bloc-Chat-React-extra-features/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/ksin/grids/Bloc-Chat-React-extra-features/src/components/RoomList.js\";\nimport React, { Component } from 'react';\nimport * as firebase from 'firebase';\nimport './RoomList.css';\n\nvar RoomList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RoomList, _Component);\n\n  function RoomList(props) {\n    var _this;\n\n    _classCallCheck(this, RoomList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RoomList).call(this, props));\n    _this.state = {\n      rooms: [],\n      name: ''\n    };\n    _this.roomsRef = _this.props.firebase.database().ref('rooms');\n    _this.createRoom = _this.createRoom.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.roomChange = _this.roomChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.deleteRoom = _this.deleteRoom.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(RoomList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.roomsRef.on('value', function (snapshot) {\n        var roomChanges = [];\n        snapshot.forEach(function (room) {\n          roomChanges.push({\n            key: room.key,\n            name: room.val().name\n          });\n        });\n\n        _this2.setState({\n          rooms: roomChanges\n        });\n      });\n    }\n  }, {\n    key: \"roomChange\",\n    value: function roomChange(e) {\n      e.preventDefault();\n      this.setState({\n        name: e.target.value\n      });\n    }\n  }, {\n    key: \"createRoom\",\n    value: function createRoom(e) {\n      e.preventDefault();\n      this.roomsRef.push({\n        name: this.state.name\n      });\n      this.setState({\n        name: \"\"\n      });\n    }\n  }, {\n    key: \"selectRoom\",\n    value: function selectRoom(room) {\n      this.props.setActiveRoom(room);\n    }\n  }, {\n    key: \"deleteRoom\",\n    value: function deleteRoom(roomkey) {\n      var room = this.props.firebase.database().ref('rooms/' + roomkey);\n      room.remove();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var roomList = this.state.rooms.map(function (room, index) {\n        return React.createElement(\"li\", {\n          key: room.key,\n          onClick: function onClick(e) {\n            _this3.selectRoom(room, e);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, room.name, React.createElement(\"button\", {\n          className: \"deleteRoom\",\n          onClick: function onClick(e) {\n            _this3.deleteRoom(room.key);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, \"Delete\"));\n      });\n      var roomForm = React.createElement(\"form\", {\n        onSubmit: this.createRoom,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \"Add a room:\"), React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.name,\n        placeholder: \"Type room name\",\n        onChange: this.roomChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }));\n      return React.createElement(\"div\", {\n        className: \"selectRoom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, roomList), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, roomForm));\n    }\n  }]);\n\n  return RoomList;\n}(Component);\n\nexport default RoomList;","map":{"version":3,"sources":["/Users/ksin/grids/Bloc-Chat-React-extra-features/src/components/RoomList.js"],"names":["React","Component","firebase","RoomList","props","state","rooms","name","roomsRef","database","ref","createRoom","bind","roomChange","deleteRoom","on","snapshot","roomChanges","forEach","room","push","key","val","setState","e","preventDefault","target","value","setActiveRoom","roomkey","remove","roomList","map","index","selectRoom","roomForm"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport * as firebase from 'firebase';\nimport './RoomList.css';\n\n\n\nclass RoomList extends Component {\n  constructor (props){\n  super(props);\n  this.state = {\n    rooms: [],\n    name:''\n  };\n  this.roomsRef = this.props.firebase.database().ref('rooms');\n  this.createRoom = this.createRoom.bind(this);\n  this.roomChange = this.roomChange.bind(this);\n  this.deleteRoom = this.deleteRoom.bind(this);\n}\n\ncomponentDidMount() {\n  this.roomsRef.on('value', snapshot => {\n    const roomChanges = [];\n    snapshot.forEach((room) => {\n      roomChanges.push({\n        key: room.key,\n        name: room.val().name\n      });\n    });\n    this.setState({ rooms: roomChanges})\n  });\n}\n\nroomChange (e) {\n  e.preventDefault();\n  this.setState({name: e.target.value})\n}\n\ncreateRoom (e) {\n  e.preventDefault()\n  this.roomsRef.push(\n    {\n      name: this.state.name,\n    }\n  );\n  this.setState({ name: \"\" })\n}\n\nselectRoom(room) {\n  this.props.setActiveRoom(room);\n}\n\ndeleteRoom(roomkey) {\n  const room = this.props.firebase.database().ref('rooms/' + roomkey);\n  room.remove();\n}\n\n  render() {\n    let roomList = this.state.rooms.map((room, index) =>\n      <li key={room.key} onClick={ (e) => {this.selectRoom(room,e)} }>{room.name}\n      <button className=\"deleteRoom\" onClick= { (e) => {this.deleteRoom(room.key)} }>Delete</button>\n      </li>\n    );\n    let roomForm = (\n\n        <form onSubmit={this.createRoom}>\n          <h2>Add a room:</h2>\n          <input type=\"text\" value={this.state.name} placeholder=\"Type room name\" onChange={this.roomChange} />\n          <input type=\"submit\" value=\"Submit\"/>\n        </form>\n\n      )\n    return (\n      <div className='selectRoom'>\n        <ul>{roomList}</ul>\n        <ul>{roomForm}</ul>\n      </div>\n    );\n  }\n}\n\n\nexport default RoomList;\n"]},"metadata":{},"sourceType":"module"}